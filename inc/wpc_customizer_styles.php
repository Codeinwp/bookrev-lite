<?php
/**
 * This file prints the CSS code generated by the customizer inside the header tag.
 * @author vcatalin007@gmail.com
 */

// Get the saved font transient.
$fontTransient = get_transient("cwp_gfonts_transient");

// Decode the transient
$fontTransient = json_decode($fontTransient);

// Fonts available to select by user.
$fontsUsed = array(
	'article-title-font',
	'article-content-font',
	'meta-info-font'
);

book_rev_lite_build_font_url($fontsUsed, $fontTransient);


echo "<style type='text/css'>";

// If CWP Product Review plugin is active and running set up the special classes.
include_once( ABSPATH . 'wp-admin/includes/plugin.php' );
if(is_plugin_active('wp-product-review/wp-product-review.php')) {
	$setColors = book_rev_lite_get_product_review_colors();
	foreach($setColors as $key => $value) echo ".grade." . $key . " { background: " . $value . " !important;} ";	
} 


// Set lower footer background color.
$cwp_wpc_upper_footer_bg_color = get_theme_mod("lower-footer-background-color");
if($cwp_wpc_upper_footer_bg_color != '')
	{
		echo "#main-footer .lower-footer { background:" .  $cwp_wpc_upper_footer_bg_color . "; }";
	}

// Set upper footer background color.
$cwp_wpc_footer_bg_color = get_theme_mod("footer-background-color");
if($cwp_wpc_footer_bg_color != '')
	{
		echo "#main-footer .upper-footer { background:" .  $cwp_wpc_footer_bg_color . "; }";
	}

// Set header background color.
$cwp_wpc_header_bg_color = get_theme_mod("header-background-color");
if($cwp_wpc_header_bg_color != '')
	{
		echo "#inner-header { background:" .  $cwp_wpc_header_bg_color . "; }";
	}

// Set header menu background color.
$cwp_wpc_header_menu_bg_color = get_theme_mod("header-menu-background-color");
if($cwp_wpc_header_menu_bg_color != '')
	{
		echo "#main-menu { background:" .  $cwp_wpc_header_menu_bg_color . "; }";
	}

// Set header logo.
$cwp_wpc_header_logo = get_theme_mod("header-logo");
$cwp_wpc_header_logo_width = get_theme_mod("logo-width");
$cwp_wpc_header_logo_height = get_theme_mod("logo-height");

if($cwp_wpc_header_logo != '')
	{
		echo "#inner-header .logo { background:url('" .  $cwp_wpc_header_logo . "') no-repeat; width: " . $cwp_wpc_header_logo_width . "px !important; height: " . $cwp_wpc_header_logo_height . "px !important;}";
	}

// Set the main page layout styles.
$cwp_wpc_layout_style = get_theme_mod("mp_layout_type");
if($cwp_wpc_layout_style == "sidebarleft") 
	{
		echo ".article-container { margin-right: 0; margin-left: 1.4%; }";
	}
elseif ($cwp_wpc_layout_style == "fullwidth")
	{
		echo ".article-container { margin: 0; width: 100%; }";
	}

// Set the featured category block background color.
$cwp_featured_categ_block_bg_color = get_theme_mod("featured-category-block-bgcolor");
if($cwp_featured_categ_block_bg_color != "")
	{
		echo ".featured-carousel { background:" . $cwp_featured_categ_block_bg_color . ";}";	
	}

// Set the latest articles block background color.
$cwp_la_block_bgcolor = get_theme_mod("latest-articles-block-bgcolor");
if($cwp_la_block_bgcolor != "")
	{
		echo "#latest-reviews-block .lrb-inner { background:" . $cwp_la_block_bgcolor . ";}";
		echo "#latest-reviews-block .article-display .article-text { background: " . $cwp_la_block_bgcolor . ";}";
	}

// Set the latest articles item hover background color.
$cwp_lab_item_bgcolor = get_theme_mod("lab-article-hover-bgcolor");
if($cwp_lab_item_bgcolor != "")
	{
		echo "#latest-reviews-block .article-link.active, #latest-reviews-block .article-link:hover { background:" . $cwp_lab_item_bgcolor . " !important; }";
	}
		
// Set the highlight of the Day block background color.
$cwp_hotd_block_bgcolor = get_theme_mod("hotd-bg-color");
if($cwp_hotd_block_bgcolor != "")
{
	echo "#highlight-day .highlight-inner { background:".$cwp_hotd_block_bgcolor.";}";
}

// Set the article background color.
$cwp_article_bgcolor = get_theme_mod("article-bgcolor");
if($cwp_article_bgcolor)
{
	echo ".article-container article { background:".$cwp_article_bgcolor." ;}";
}

// Set the pagination background color.
$cwp_pagination_bgcolor = get_theme_mod("pagination-bgcolor");
if($cwp_pagination_bgcolor != "")
{
	echo "nav#pagination { background: " . $cwp_pagination_bgcolor . " ;}";
}

// Block Header Background color.
$cwp_blockheader_bgcolor = get_theme_mod("block-header-bgcolor");
if($cwp_blockheader_bgcolor != "")
{
	echo ".article-container .newsblock > header { background:" . $cwp_blockheader_bgcolor . ";}";
}

// Widget Header Background Color.
$cwp_widget_header_bgcolor = get_theme_mod("widget-header-bgcolor");
if($cwp_widget_header_bgcolor != "")
{
	echo "#main-sidebar .widget header { background:" . $cwp_widget_header_bgcolor . ";}";	
}

// Widget Header Top Border Color.
$cwp_widget_header_border_bgcolor = get_theme_mod("widget-header-border-color");
if($cwp_widget_header_border_bgcolor != "")
{
	echo "#main-sidebar .widget header { border-color:" . $cwp_widget_header_border_bgcolor . ";}";	
}

// Pagination Button Color.
$cwp_pagination_button_color = get_theme_mod("pagination-button-color");
if($cwp_pagination_button_color != "")
{
	echo "nav#pagination ul li a { background:" . $cwp_pagination_button_color . ";}";	
}

// Pagination Button Color Hover
$cwp_pagination_button_color = get_theme_mod("pagination-button-color-hover");
if($cwp_pagination_button_color != "")
{
	echo "nav#pagination ul li a:hover { background:" . $cwp_pagination_button_color . ";}";	
}

// Pagination Button Color Active
$cwp_pagination_button_active = get_theme_mod("pagination-button-color-active");
if($cwp_pagination_button_active != "")
{
	echo "nav#pagination ul li.active a { background:" . $cwp_pagination_button_active . ";}";	
}

// Articles Title Fonts
$cwp_article_title_font = get_theme_mod("article-title-font");
if($cwp_article_title_font !== "")
{
	echo "
		article a.title, .article-title a, .title a, .sd-title a, .featured-carousel .slide .article-content header h3,
		.article-container.post > header .title,
		.article-container.post #wrap-up .review-header h3,
		#main-menu nav ul li a,
		#top-bar-menu ul li a,
		.widget header h2
		{ font-family: " . '"' .  $fontTransient->items[$cwp_article_title_font]->family . '"' . ", sans-serif !important; }
	";
}

// Articles Content Font
$cwp_article_content_font = get_theme_mod('article-content-font');
if($cwp_article_content_font !== "") {
	echo "
		#slider .slide .sd-body p,
		.featured-carousel .slide .article-content .content p,
		#latest-reviews-block .article-display .article-text,
		.widget.latest-comments p,
		#highlight-day p,
		.widget.text p,
		.article-container article p,
		#main-footer .widget .comment,
		#main-footer .widget .article,
		.textwidget,
		.widget,
		.widget a,
		.review-body .option-name,
		.article-container.post #wrap-up .proscons li
		{ font-family: " . '"' .  $fontTransient->items[$cwp_article_content_font]->family . '"' . ", sans-serif !important; }
	";
}

$cwp_meta_info_font = get_theme_mod('meta-info-font');

if($cwp_meta_info_font !== "") {
	echo "
		.featured-carousel .slide .article-content header .meta .category a,
		.featured-carousel .slide .article-content header .meta .date,
		#slider .sd-meta .read-more,
		#slider .sd-meta span a,
		#latest-reviews-block .article-link .article-meta .categ a,
		#latest-reviews-block .article-link .article-meta .date,
		#latest-reviews-block .article-display .a-details .category a,
		#latest-reviews-block .article-display .a-details .date,
		.widget.topbooks .meta .categ a,
		.widget.topbooks .meta .date,
		.featured-carousel .slide .feat-img .comment-count a,
		.article-container article .feat-img .comment-count a,
		#latest-reviews-block .article-display .featured-image .a-meta .grade,
		#latest-reviews-block .article-display .featured-image .a-meta .no-comments a,
		.widget.topbooks .grade,
		.widget.latest-comments h4,
		#highlight-day .meta .categ a,
		#highlight-day .meta .date,
		.article-container article header .meta .categ a,
		.article-container article header .meta .date,
		.widget.topbooks .meta .categ a,
		.widget.topbooks .meta .date,
		.widget.topbooks .grade,
		.featured-carousel .slide .feat-img .grade,
		.article-container article .feat-img .grade,
		#slider .slide .slide-description .top-sd-head .grade,
		#slider .sd-meta span,
		.article-container.post > header .article-details .date
		{ font-family: " . '"' .  $fontTransient->items[$cwp_meta_info_font]->family . '"' . ", sans-serif !important; }
	";
}


echo "</style>";
